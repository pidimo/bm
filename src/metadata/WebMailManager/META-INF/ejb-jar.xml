<?xml version="1.0" encoding="UTF-8"?>

<ejb-jar xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/ejb-jar_2_1.xsd"
         version="2.1">
    <enterprise-beans>
        <entity>
            <ejb-name>Folder</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.FolderHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.Folder</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.FolderBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>Folder</abstract-schema-name>
            <cmp-field>
                <field-name>folderId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>folderName</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>folderDate</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>userMailId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>folderType</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>columnToShow</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>isOpen</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>parentFolderId</field-name>
            </cmp-field>
            <primkey-field>folderId</primkey-field>
            <query>
                <query-method>
                    <method-name>findByFolderType</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(fl)
                    FROM Folder AS fl
                    WHERE fl.userMailId = ?1 AND fl.folderType = ?2 AND fl.companyId = ?3
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findDefaultFolders</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(fl)
                    FROM Folder AS fl
                    WHERE fl.userMailId = ?1 AND fl.companyId = ?2 AND fl.folderType = 0
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findByUserMailKey</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(fl)
                    FROM Folder AS fl
                    WHERE fl.userMailId = ?1 AND fl.companyId = ?2
                    ORDER BY fl.folderName ASC 
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>ejbSelectGetFolderIdentifiers</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT fl.folderId
                    FROM Folder AS fl
                    WHERE fl.userMailId = ?1 AND fl.companyId = ?2 
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findByUserMailKeySort</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(fl)
                    FROM Folder AS fl
                    WHERE fl.userMailId = ?1 AND fl.companyId = ?2
                    ORDER BY fl.folderType DESC, fl.folderName ASC
                    ]]>
                </ejb-ql>
            </query>
        </entity>
        <entity>
            <ejb-name>UserMail</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.UserMailHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.UserMail</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.UserMailBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>UserMail</abstract-schema-name>
            <cmp-field>
                <field-name>userMailId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>userMailDate</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>editMode</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>saveSendItem</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>emptyTrashLogout</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>replyMode</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>editorFont</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>editorFontSize</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>showPopNotification</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>backgroundDownload</field-name>
            </cmp-field>
            <primkey-field>userMailId</primkey-field>
            <query>
                <query-method>
                    <method-name>ejbSelectBackgroundUserMailIds</method-name>
                    <method-params/>
                </query-method>
                <ejb-ql>
                    <![CDATA[
                    SELECT user.userMailId
                    FROM UserMail AS user
                    WHERE user.backgroundDownload = true
                    ]]>
                </ejb-ql>
            </query>
        </entity>
        <entity>
            <ejb-name>Signature</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.SignatureHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.Signature</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.SignatureBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>Signature</abstract-schema-name>
            <cmp-field>
                <field-name>signatureId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>signatureName</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>userMailId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>isDefault</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>textSignatureId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>htmlSignatureId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailAccountId</field-name>
            </cmp-field>
            <primkey-field>signatureId</primkey-field>
            <query>
                <query-method>
                    <method-name>findDefaultSignature</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[SELECT OBJECT(a)
                    FROM Signature as a
                    WHERE a.userMailId = ?1 AND a.mailAccountId =?2 AND a.isDefault=true
                    ]]>
                </ejb-ql>
            </query>
        </entity>
        <entity>
            <ejb-name>Filter</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.FilterHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.Filter</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.FilterBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>Filter</abstract-schema-name>
            <cmp-field>
                <field-name>filterId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>filterName</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>folderId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <primkey-field>filterId</primkey-field>
            <query>
                <query-method>
                    <method-name>findByFolderId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[
                    SELECT OBJECT(a)
                    FROM Filter as a
                    WHERE a.folderId = ?1
                    ]]>
                </ejb-ql>
            </query>

            <query>
                <query-method>
                    <method-name>findByUserId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(filter)
                    FROM Filter AS filter
                    WHERE filter.folder.userMailId =?1 AND filter.folder.companyId =?2
                    ]]>
                </ejb-ql>
            </query>
        </entity>
        <entity>
            <ejb-name>Condition</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.ConditionHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.Condition</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.ConditionBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>Condition</abstract-schema-name>
            <cmp-field>
                <field-name>conditionId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>conditionNameKey</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>conditionKey</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>conditionText</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>filterId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <primkey-field>conditionId</primkey-field>
        </entity>
        <entity>
            <ejb-name>Mail</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.MailHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.Mail</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.MailBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>Mail</abstract-schema-name>
            <cmp-field>
                <field-name>mailId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailSubject</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailState</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailPriority</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>folderId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>bodyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailSize</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailFrom</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailPersonalFrom</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>sentDate</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>incomingOutgoing</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>signatureId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailAccount</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>hidden</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>saveEmail</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>createContact</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>messageId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>haveAttachments</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>isNewEmail</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>isCompleteEmail</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>uidl</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>processToSent</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>isDraftTemp</field-name>
            </cmp-field>
            <primkey-field>mailId</primkey-field>
            <query>
                <query-method>
                    <method-name>findByFolderId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(ml)
                    FROM Mail AS ml
                    WHERE ml.folderId = ?1 AND ml.companyId = ?2 and ml.hidden = false
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>ejbSelectEmailIdsToSend</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT ml.mailId
                    FROM Mail AS ml
                    WHERE ml.folderId = ?1 AND ml.companyId = ?2 and ml.hidden = false and ml.incomingOutgoing is null
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findByMessageID</method-name>
                    <method-params>
                        <method-param>java.lang.String</method-param>
                        <method-param>java.lang.String</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(ml)
                    FROM Mail AS ml
                    WHERE ml.messageId = ?1 AND ml.mailAccount  = ?2 AND ml.companyId = ?3 and ml.hidden = false
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findMailWithHaveAttachmentIsNull</method-name>
                    <method-params/>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(ml)
                    FROM Mail AS ml
                    WHERE ml.haveAttachments is null
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findNewEmails</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(ml)
                    FROM Mail AS ml
                    WHERE ml.folderId = ?1 AND ml.companyId = ?2 AND ml.isNewEmail = true 
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>ejbSelectGetIncompleteEmails</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT ml.mailId
                    FROM Mail AS ml
                    WHERE ml.folderId = ?1 AND ml.companyId = ?2 AND ml.isCompleteEmail = false 
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findByFolderIdAndIsMailContact</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(ml)
                    FROM Mail as ml, MailContact as mc
                    WHERE ml.folderId = ?1 AND ml.companyId = ?2 AND mc.mailId=ml.mailId and ml.hidden = false
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findAllBySentDateAsNull</method-name>
                    <method-params/>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(ml) FROM Mail as ml WHERE ml.sentDate IS NULL and ml.hidden = false
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>ejbSelectCountMessages</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[SELECT COUNT(a.mailId) FROM Mail AS a WHERE a.folderId =?1 and a.companyId =?2 and a.hidden = false]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>ejbSelectCountUnReadMessages</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[SELECT COUNT(a.mailId) FROM Mail AS a WHERE a.folderId =?1 and a.companyId =?2 and a.hidden = false and a.mailState = 0]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>ejbSelectCalculateFolderSize</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT sum(mail.mailSize)
                    FROM Mail as mail
                    WHERE mail.folderId =?1 and mail.companyId = ?2 and mail.hidden = false
                    ]]>
                </ejb-ql>
            </query>
        </entity>
        <entity>
            <ejb-name>Attach</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.AttachHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.Attach</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.AttachBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>Attach</abstract-schema-name>
            <cmp-field>
                <field-name>attachId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>attachName</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>attachFile</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>visible</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>size</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>emlAttachUUID</field-name>
            </cmp-field>
            <primkey-field>attachId</primkey-field>
            <query>
                <query-method>
                    <method-name>findAttachmentsWithOutSize</method-name>
                    <method-params/>
                </query-method>
                <ejb-ql>
                    <![CDATA[
                    SELECT OBJECT (attach)
                    FROM Attach AS attach
                    WHERE attach.size is null
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findByMailId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[
                    SELECT OBJECT (attach)
                    FROM Attach AS attach
                    WHERE attach.mailId = ?1 and attach.companyId =?2
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>ejbSelectSumSizeByMailId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[
                    SELECT SUM(attach.size)
                    FROM Attach AS attach
                    WHERE attach.mailId = ?1
                    ]]>
                </ejb-ql>
            </query>
        </entity>
        <entity>
            <ejb-name>Body</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.BodyHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.Body</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.BodyBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>Body</abstract-schema-name>
            <cmp-field>
                <field-name>bodyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>bodyType</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>bodyContent</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <primkey-field>bodyId</primkey-field>
        </entity>
        <entity>
            <ejb-name>MailGroupAddr</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.MailGroupAddrHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.MailGroupAddr</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.MailGroupAddrBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>MailGroupAddr</abstract-schema-name>
            <cmp-field>
                <field-name>mailGroupAddrId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>name</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>userMailId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <primkey-field>mailGroupAddrId</primkey-field>
        </entity>
        <entity>
            <ejb-name>AddressGroup</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.AddressGroupHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.AddressGroup</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.AddressGroupBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>AddressGroup</abstract-schema-name>
            <cmp-field>
                <field-name>addressGroupId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailGroupAddrId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>contactPersonId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>telecomId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>sendToAll</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>addressId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <primkey-field>addressGroupId</primkey-field>
            <query>
                <query-method>
                    <method-name>findByAddressId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(g)
                    FROM AddressGroup AS g
                    WHERE g.addressId=?1 AND g.contactPersonId IS NULL
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findByContactPerson</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(g)
                    FROM AddressGroup AS g
                    WHERE g.addressId=?1 AND g.contactPersonId=?2
                    ]]>
                </ejb-ql>
            </query>
        </entity>
        <entity>
            <ejb-name>MailRecipient</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.MailRecipientHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.MailRecipient</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.MailRecipientBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>MailRecipient</abstract-schema-name>
            <cmp-field>
                <field-name>mailRecipientId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>email</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>type</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>personalName</field-name>
            </cmp-field>
            <primkey-field>mailRecipientId</primkey-field>
            <query>
                <query-method>
                    <method-name>findByMailIdAndToType</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(mr)
                    FROM MailRecipient AS mr
                    WHERE mr.mailId=?1 AND mr.type=?2 AND mr.companyId = ?3
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findByMailId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(mr)
                    FROM MailRecipient AS mr
                    WHERE mr.mailId=?1 AND mr.companyId = ?2
                    ]]>
                </ejb-ql>
            </query>

        </entity>
        <message-driven>
            <ejb-name>SendSimpleMailMDB</ejb-name>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.SendSimpleMailMDB</ejb-class>
            <messaging-type>javax.jms.MessageListener</messaging-type>
            <transaction-type>Container</transaction-type>
            <!--<message-destination-type>javax.jms.Queue</message-destination-type>-->
            <activation-config>
                <activation-config-property>
                    <activation-config-property-name>destinationType</activation-config-property-name>
                    <activation-config-property-value>javax.jms.Queue</activation-config-property-value>
                </activation-config-property>
                <activation-config-property>
                    <activation-config-property-name>acknowledgeMode</activation-config-property-name>
                    <activation-config-property-value>Auto-acknowledge</activation-config-property-value>
                </activation-config-property>
                <!--<activation-config-property>
                    <activation-config-property-name>messageSelector</activation-config-property-name>
                    <activation-config-property-value></activation-config-property-value>
                </activation-config-property>-->
                <activation-config-property>
                    <activation-config-property-name>subscriptionDurability</activation-config-property-name>
                    <activation-config-property-value>Durable</activation-config-property-value>
                </activation-config-property>
            </activation-config>
        </message-driven>
        <entity>
            <ejb-name>MailContact</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.MailContactHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.MailContact</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.MailContactBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>MailContact</abstract-schema-name>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>contactId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailContactId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>email</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailId</field-name>
            </cmp-field>
            <primkey-field>mailContactId</primkey-field>
            <query>
                <query-method>
                    <method-name>findByMailId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(mr)
                    FROM MailContact AS mr
                    WHERE mr.mailId=?1 AND mr.companyId = ?2
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findByContactId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT DISTINCT OBJECT(mc)
                    FROM MailContact AS mc
                    WHERE mc.contactId = ?1 AND mc.companyId = ?2
                    ]]>
                </ejb-ql>
            </query>
        </entity>
        <entity>
            <ejb-name>MailAccount</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.MailAccountHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.MailAccount</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.MailAccountBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>MailAccount</abstract-schema-name>
            <cmp-field>
                <field-name>email</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>login</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailAccountId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>password</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>serverName</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>serverPort</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>userMailId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>useSSLConnection</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>accountType</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>defaultAccount</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>prefix</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>smtpServer</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>smtpPort</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>smtpAuthentication</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>smtpSSL</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>lastDownloadTime</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>usePOPConfiguration</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>smtpLogin</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>smtpPassword</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>keepEmailOnServer</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>createInCommunication</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>createOutCommunication</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>automaticForward</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>forwardEmail</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>automaticReply</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>automaticReplyMessageSubject</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>automaticReplyMessage</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>removeEmailOnServerAfterOf</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>replyMessageHtmlId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>replyMessageTextId</field-name>
            </cmp-field>
            <primkey-field>mailAccountId</primkey-field>
            <query>
                <query-method>
                    <method-name>findAccountByUserMail</method-name>
                    <method-params>
                        <method-param>java.lang.String</method-param>
                        <method-param>java.lang.String</method-param>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[SELECT OBJECT(account)
                    FROM MailAccount AS account
                    WHERE account.login = ?1 AND
                    account.serverName = ?2 AND
                    account.userMailId = ?3 AND
                    account.companyId = ?4]]>
                </ejb-ql>
            </query>
            <query>
                <description>
                    Find all smtp configurations where the login and server name are using
                    by other users.
                </description>
                <query-method>
                    <method-name>findAccountsByLoginAndServerName</method-name>
                    <method-params>
                        <method-param>java.lang.String</method-param>
                        <method-param>java.lang.String</method-param>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[SELECT distinct OBJECT(account)
                    FROM MailAccount AS account
                    WHERE account.login = ?1 AND
                    account.serverName = ?2 AND
                    account.userMailId <> ?3 AND
                    account.companyId = ?4]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findSMTPAccountsByUserAndServerName</method-name>
                    <method-params>
                        <method-param>java.lang.String</method-param>
                        <method-param>java.lang.String</method-param>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[SELECT distinct OBJECT(account)
                    FROM MailAccount AS account
                    WHERE account.smtpLogin = ?1 AND
                    account.smtpServer = ?2 AND
                    account.userMailId <> ?3 AND
                    account.companyId = ?4]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findAccountsByUserMailAndCompany</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[SELECT OBJECT(account)
                    FROM MailAccount AS account
                    WHERE account.userMailId = ?1 AND account.companyId = ?2]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findAccountsByEmailAndUser</method-name>
                    <method-params>
                        <method-param>java.lang.String</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[SELECT OBJECT(account)
                    FROM MailAccount AS account
                    WHERE account.email = ?1 AND account.userMailId = ?2]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findDefaultAccount</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[SELECT OBJECT(account)
                    FROM MailAccount AS account
                    WHERE account.userMailId = ?1 AND account.companyId = ?2 AND account.defaultAccount = true]]>
                </ejb-ql>
            </query>
            <query>
                <description>
                    Find the smtp configurations according to the user.
                    The parameters are:
                    The smtp user, smtp server, user mail identifier and company identifier.
                </description>
                <query-method>
                    <method-name>findSMTPAccountsByUserMail</method-name>
                    <method-params>
                        <method-param>java.lang.String</method-param>
                        <method-param>java.lang.String</method-param>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[SELECT OBJECT(account)
                    FROM MailAccount AS account
                    WHERE account.smtpLogin = ?1 AND
                    account.smtpServer = ?2 AND
                    account.userMailId = ?3 AND 
                    account.companyId = ?4]]>
                </ejb-ql>
            </query>
            <query>
                <description>
                    query to find all mail account with old reply messages
                </description>
                <query-method>
                    <method-name>findBatchWithReplyMessages</method-name>
                    <method-params>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[SELECT OBJECT(account)
                    FROM MailAccount AS account
                    WHERE account.replyMessageTextId IS NULL AND account.automaticReplyMessage IS NOT NULL]]>
                </ejb-ql>
            </query>
        </entity>
        <entity>
            <ejb-name>EmailRecipientAddress</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.EmailRecipientAddressHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.EmailRecipientAddress</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.EmailRecipientAddressBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>EmailRecipientAddress</abstract-schema-name>
            <cmp-field>
                <field-name>addressId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>contactPersonId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>emailRecipientAddressId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailRecipientId</field-name>
            </cmp-field>
            <primkey-field>emailRecipientAddressId</primkey-field>
            <query>
                <query-method>
                    <method-name>findByMailRecipientId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[
                    SELECT OBJECT(emailRecipientAddress)
                    FROM EmailRecipientAddress AS emailRecipientAddress
                    WHERE emailRecipientAddress.mailRecipientId = ?1 AND emailRecipientAddress.companyId = ?2]]>
                </ejb-ql>
            </query>
        </entity>
        <entity>
            <ejb-name>EmailAccountError</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.EmailAccountErrorHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.EmailAccountError</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.EmailAccountErrorBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>true</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>EmailAccountError</abstract-schema-name>
            <cmp-field>
                <field-name>emailAccountErrorId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>errorType</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailAccountId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>userMailId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>timeError</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>causedBy</field-name>
            </cmp-field>
            <primkey-field>emailAccountErrorId</primkey-field>
            <query>
                <query-method>
                    <method-name>findByUserMailId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[
                    SELECT OBJECT(entity)
                    FROM EmailAccountError AS entity
                    WHERE entity.userMailId = ?1 AND entity.companyId = ?2]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findByMailAccountId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[
                    SELECT OBJECT(entity)
                    FROM EmailAccountError AS entity
                    WHERE entity.userMailId = ?1 AND entity.mailAccountId = ?2 AND entity.companyId = ?3]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findByErrorType</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[
                    SELECT OBJECT(entity)
                    FROM EmailAccountError AS entity
                    WHERE entity.userMailId = ?1 AND entity.mailAccountId = ?2 AND entity.errorType =?3 AND entity.companyId = ?4]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findByCause</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.String</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[
                    SELECT OBJECT(entity)
                    FROM EmailAccountError AS entity
                    WHERE entity.userMailId = ?1 AND entity.mailAccountId = ?2 AND entity.errorType =?3 AND entity.companyId = ?4 AND entity.causedBy = ?5]]>
                </ejb-ql>
            </query>
        </entity>
        <entity>
            <ejb-name>EmailSource</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.EmailSourceHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.EmailSource</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.EmailSourceBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>EmailSource</abstract-schema-name>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>fileSize</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>source</field-name>
            </cmp-field>
            <primkey-field>mailId</primkey-field>
            <query>
                <query-method>
                    <method-name>findByMailId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[
                    SELECT OBJECT (emailSource)
                    FROM EmailSource AS emailSource
                    WHERE emailSource.mailId = ?1 AND emailSource.companyId = ?2
                    ]]>
                </ejb-ql>
            </query>
        </entity>
        <entity>
            <ejb-name>ImageStore</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.ImageStoreHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.ImageStore</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.ImageStoreBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>true</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>ImageStore</abstract-schema-name>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>fileData</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>fileName</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>sessionId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>imageStoreId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>imageType</field-name>
            </cmp-field>
            <primkey-field>imageStoreId</primkey-field>
            <query>
                <query-method>
                    <method-name>findBySessionId</method-name>
                    <method-params>
                        <method-param>java.lang.String</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(t)
                    FROM ImageStore AS t
                    WHERE t.sessionId = ?1 AND t.imageType = ?2
                    ]]>
                </ejb-ql>
            </query>
        </entity>
        <entity>
            <ejb-name>UidlTrack</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.UidlTrackHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.UidlTrack</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.UidlTrackBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>false</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>UidlTrack</abstract-schema-name>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>uidlTrackId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>uidl</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailAccountId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>deleteFromPopAtTime</field-name>
            </cmp-field>
            <primkey-field>uidlTrackId</primkey-field>
            <query>
                <query-method>
                    <method-name>ejbSelectGetUidls</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[
                    SELECT uidlTrack.uidl
                    FROM UidlTrack AS uidlTrack
                    WHERE uidlTrack.mailAccountId = ?1 AND uidlTrack.companyId = ?2
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findByUidl</method-name>
                    <method-params>
                        <method-param>java.lang.String</method-param>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[
                    SELECT Object(uidlTrack)
                    FROM UidlTrack AS uidlTrack
                    WHERE uidlTrack.uidl = ?1 AND uidlTrack.mailAccountId = ?2 AND uidlTrack.companyId = ?3
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findByMailAccountId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[
                    SELECT Object(uidlTrack)
                    FROM UidlTrack AS uidlTrack
                    WHERE uidlTrack.mailAccountId = ?1 AND uidlTrack.companyId = ?2
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findByMailAccountIdDeleteFromPOPServerAt</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Long</method-param>
                    </method-params>
                </query-method>
                <ejb-ql>
                    <![CDATA[
                    SELECT Object(uidlTrack)
                    FROM UidlTrack AS uidlTrack
                    WHERE uidlTrack.mailAccountId = ?1 AND uidlTrack.deleteFromPopAtTime <= ?2
                    ]]>
                </ejb-ql>
            </query>
        </entity>
        <entity>
            <ejb-name>SignatureImage</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.SignatureImageHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.SignatureImage</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.SignatureImageBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>true</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>SignatureImage</abstract-schema-name>
            <cmp-field>
                <field-name>signatureImageId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>imageStoreId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>signatureId</field-name>
            </cmp-field>
            <primkey-field>signatureImageId</primkey-field>
            <query>
                <query-method>
                    <method-name>findBySignatureId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(fl)
                    FROM SignatureImage AS fl
                    WHERE fl.signatureId = ?1 AND fl.companyId = ?2
                    ]]>
                </ejb-ql>
            </query>
        </entity>
        <entity>
            <ejb-name>EmailAccountErrorDetail</ejb-name>
            <local-home>com.piramide.elwis.domain.webmailmanager.EmailAccountErrorDetailHome</local-home>
            <local>com.piramide.elwis.domain.webmailmanager.EmailAccountErrorDetail</local>
            <ejb-class>com.piramide.elwis.domain.webmailmanager.EmailAccountErrorDetailBean</ejb-class>
            <persistence-type>Container</persistence-type>
            <prim-key-class>java.lang.Integer</prim-key-class>
            <reentrant>true</reentrant>
            <cmp-version>2.x</cmp-version>
            <abstract-schema-name>EmailAccountErrorDetail</abstract-schema-name>
            <cmp-field>
                <field-name>emailAccountErrorDetailId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>companyId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>emails</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>emailAccountErrorId</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>subject</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>version</field-name>
            </cmp-field>
            <cmp-field>
                <field-name>mailIdentifier</field-name>
            </cmp-field>
            <primkey-field>emailAccountErrorDetailId</primkey-field>
            <query>
                <query-method>
                    <method-name>findByEmailAccountErrorId</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(e)
                    FROM EmailAccountErrorDetail AS e
                    WHERE e.emailAccountErrorId = ?1 AND e.companyId = ?2
                    ]]>
                </ejb-ql>
            </query>
            <query>
                <query-method>
                    <method-name>findByEmailAccountErrorIdMailIdentifier</method-name>
                    <method-params>
                        <method-param>java.lang.Integer</method-param>
                        <method-param>java.lang.Integer</method-param>
                    </method-params>
                </query-method>
                <ejb-ql><![CDATA[
                    SELECT OBJECT(e)
                    FROM EmailAccountErrorDetail AS e
                    WHERE e.emailAccountErrorId = ?1 AND e.mailIdentifier = ?2
                    ]]>
                </ejb-ql>
            </query>

        </entity>
    </enterprise-beans>

    <relationships>
        <ejb-relation>
            <ejb-relation-name>UserMail - Signature</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>userMail</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>UserMail</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>signatures</cmr-field-name>
                    <cmr-field-type>java.util.Collection</cmr-field-type>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>signature</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <cascade-delete/>
                <relationship-role-source>
                    <ejb-name>Signature</ejb-name>
                </relationship-role-source>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>UserMail - MailGroupAddr</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>userMail</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>UserMail</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>mailGroupAddrs</cmr-field-name>
                    <cmr-field-type>java.util.Collection</cmr-field-type>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>mailGroupAddr</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <cascade-delete/>
                <relationship-role-source>
                    <ejb-name>MailGroupAddr</ejb-name>
                </relationship-role-source>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>UserMail - Folder</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>userMail</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>UserMail</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>folders</cmr-field-name>
                    <cmr-field-type>java.util.Collection</cmr-field-type>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>folder</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <cascade-delete/>
                <relationship-role-source>
                    <ejb-name>Folder</ejb-name>
                </relationship-role-source>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>Mail - Attach</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>mail</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>Mail</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>attachs</cmr-field-name>
                    <cmr-field-type>java.util.Collection</cmr-field-type>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>attach</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <cascade-delete/>
                <relationship-role-source>
                    <ejb-name>Attach</ejb-name>
                </relationship-role-source>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>Mail - Body</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>mail</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>Mail</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>body</cmr-field-name>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>body</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <cascade-delete/>
                <relationship-role-source>
                    <ejb-name>Body</ejb-name>
                </relationship-role-source>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>Folder - Mail</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>folder</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>Folder</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>mails</cmr-field-name>
                    <cmr-field-type>java.util.Collection</cmr-field-type>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>mail</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <cascade-delete/>
                <relationship-role-source>
                    <ejb-name>Mail</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>folder</cmr-field-name>
                </cmr-field>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>Folder - Filter</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>folder</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>Folder</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>filters</cmr-field-name>
                    <cmr-field-type>java.util.Collection</cmr-field-type>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>filter</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <cascade-delete/>
                <relationship-role-source>
                    <ejb-name>Filter</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>folder</cmr-field-name>
                </cmr-field>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>Filter - Condition</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>filter</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>Filter</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>conditions</cmr-field-name>
                    <cmr-field-type>java.util.Collection</cmr-field-type>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>condition</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <cascade-delete/>
                <relationship-role-source>
                    <ejb-name>Condition</ejb-name>
                </relationship-role-source>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>MailGroupAddr - AddressGroup</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>mailGroupAddr</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>MailGroupAddr</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>addressGroups</cmr-field-name>
                    <cmr-field-type>java.util.Collection</cmr-field-type>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>addressGroup</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <cascade-delete/>
                <relationship-role-source>
                    <ejb-name>AddressGroup</ejb-name>
                </relationship-role-source>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>Mail - MailRecipient</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>mail</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>Mail</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>mailRecipients</cmr-field-name>
                    <cmr-field-type>java.util.Collection</cmr-field-type>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>mailRecipient</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <cascade-delete/>
                <relationship-role-source>
                    <ejb-name>MailRecipient</ejb-name>
                </relationship-role-source>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>MailContact - Mail</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>mailContact</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <relationship-role-source>
                    <ejb-name>MailContact</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>mail</cmr-field-name>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>mail</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>Mail</ejb-name>
                </relationship-role-source>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>UserMail - MailAccount</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>UserMail</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>UserMail</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>mailAccounts</cmr-field-name>
                    <cmr-field-type>java.util.Collection</cmr-field-type>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>MailAccount</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <relationship-role-source>
                    <ejb-name>MailAccount</ejb-name>
                </relationship-role-source>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>MailAccount - Signature</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>MailAccount</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>MailAccount</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>signatures</cmr-field-name>
                    <cmr-field-type>java.util.Collection</cmr-field-type>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>Signature</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <relationship-role-source>
                    <ejb-name>Signature</ejb-name>
                </relationship-role-source>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>Signature - Mail</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>Signature</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>Signature</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>mails</cmr-field-name>
                    <cmr-field-type>java.util.Collection</cmr-field-type>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>Mail</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <relationship-role-source>
                    <ejb-name>Mail</ejb-name>
                </relationship-role-source>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>MailRecipient - EmailRecipientAddress</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>mailRecipient</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>MailRecipient</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>recipientAddresses</cmr-field-name>
                    <cmr-field-type>java.util.Collection</cmr-field-type>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>emailRecipientAddress</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <cascade-delete/>
                <relationship-role-source>
                    <ejb-name>EmailRecipientAddress</ejb-name>
                </relationship-role-source>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>ParentFolder - Folder</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>parentFolder</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>Folder</ejb-name>
                </relationship-role-source>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>folder</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <cascade-delete/>
                <relationship-role-source>
                    <ejb-name>Folder</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>parentFolder</cmr-field-name>
                </cmr-field>
            </ejb-relationship-role>
        </ejb-relation>
        <ejb-relation>
            <ejb-relation-name>EmailAccountError - EmailAccountErrorDetail</ejb-relation-name>
            <ejb-relationship-role>
                <ejb-relationship-role-name>emailAccountError</ejb-relationship-role-name>
                <multiplicity>One</multiplicity>
                <relationship-role-source>
                    <ejb-name>EmailAccountError</ejb-name>
                </relationship-role-source>
                <cmr-field>
                    <cmr-field-name>emailAccountErrorDetails</cmr-field-name>
                    <cmr-field-type>java.util.Collection</cmr-field-type>
                </cmr-field>
            </ejb-relationship-role>
            <ejb-relationship-role>
                <ejb-relationship-role-name>emailAccountErrorDetail</ejb-relationship-role-name>
                <multiplicity>Many</multiplicity>
                <cascade-delete/>
                <relationship-role-source>
                    <ejb-name>EmailAccountErrorDetail</ejb-name>
                </relationship-role-source>
            </ejb-relationship-role>
        </ejb-relation>
    </relationships>
    <assembly-descriptor>
        <container-transaction>
            <description>Transaction attributes for 'Folder' methods</description>
            <method>
                <ejb-name>Folder</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>AddressGroup</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>Attach</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>Body</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>Condition</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>Mail</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>MailGroupAddr</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>MailRecipient</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>Signature</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>UserMail</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>MailAccount</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>MailContact</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>Filter</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>UidlTrack</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>EmailAccountError</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>EmailRecipientAddress</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>EmailSource</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
        <container-transaction>
            <method>
                <ejb-name>ImageStore</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
    </assembly-descriptor>
</ejb-jar>